<div class="container">
  <h3>Rateio</h3>


  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <p>Carregando dados...</p>
  </div>

  <!-- Mensagem de erro personalizada -->
  <div *ngIf="!loading && !usersRateio.length && mensagemErro" class="error-message">
    <p>{{ mensagemErro }}</p>
  </div>

  <!-- Tabela de contas -->
  <div *ngIf="!loading && usersRateio.length" class="table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th scope="col" style="width: 30%;">Apartamento</th>
          <th scope="col" style="width: 10%;">Fração</th>
          <th scope="col" style="width: 10%;">Valor Individual</th>
          <th scope="col" style="width: 10%;">Valor Comum</th>
          <th scope="col" style="width: 10%;">Provisões</th>
          <th scope="col" style="width: 10%;">Fundos</th>
          <th scope="col" style="width: 10%;">Valor Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of usersRateio">
          <td>{{user.apt_name}}</td>
          <td class="tooltip-container">
            <span class="tooltip-text">{{user.fracao_total.toFixed(7)}}</span>
            <div class="tooltip-message">
              Frações:<br>
              Apartamento: {{user.apt_fracao}}
              <div *ngFor="let vaga of user.vagas; let i = index">
                {{vaga.nome}}: {{vaga.fracao}} <br>
              </div>
            </div>
          </td>
          <td>{{formatCurrency(user.valorIndividual)}}</td>
          <td>{{formatCurrency(user.valorComum) }}</td>
          <td>{{formatCurrency(user.valorProvisoes) }}</td>
          <td>{{formatCurrency(user.valorFundos) }}</td>
          <td>{{returnValorTotal(user)}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
